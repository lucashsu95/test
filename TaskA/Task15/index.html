<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <title>New-Vue</title>
    <script src="../vue.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
        }

        .box {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            width: max-content;
            border: 1px solid #ccc;
        }

        .box div {
            border: 1px solid #ccc;
            padding: 10px 15px;
        }
    </style>
</head>

<body>
    <div id='app'>
        <div class="box">
            <div>Question</div>
            <div>Actual Answer</div>
            <div>Submitted Answer</div>
            <template v-for="i in len">
                <div>{{ datas[0][i - 1][0] }}</div>
                <div>{{ datas[0][i - 1][1] }}</div>
                <div>{{ datas[1][i - 1][1] }}</div>
            </template>
        </div>
        {{ score }}
    </div>
    <script>
        const app = Vue.createApp({
            data() {
                return {
                    datas: [],
                    len: 0,
                    score: '',
                };
            },
            mounted() {
                this.fetchData();
            },
            methods: {
                async fetchData() {
                    const res = await fetch('data.csv');
                    const text = await res.text();
                    const res2 = await fetch('data2.csv');
                    const text2 = await res2.text();
                    const process = (n) => n.split('\r\n').filter(x => x).map(x => x.split(','));
                    this.datas.push(process(text), process(text2));
                    this.len = this.datas[1].length;
                    this.setScore();
                    console.log(this.datas);
                },
                setScore() {
                    const score = this.datas[0].reduce((sum, x, i) => x[1] === this.datas[1][i][1] ? sum + 1 : sum, 0);
                    this.score = `Score: ${score}/${this.len}`
                }
            },
        }).mount('#app');
    </script>
</body>

</html>