<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <title>New-Vue</title>
    <script src="../vue.js"></script>
</head>

<body>
    <div id='app'>
        <h1>Input your color</h1>
        <input type="text" @input="setResult" v-model="color">
        <h2>Result</h2>
        <p v-html="result">
        </p>
    </div>
    <script>
        const app = Vue.createApp({
            data() {
                return {
                    result: '',
                    color: '#fff',
                };
            },
            mounted() {
                this.setResult();
            },
            methods: {
                setResult() {
                    const rgbRegex = /^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/
                    const hexRegex = /^\#([0-9a-f]{3}|[0-9a-f]{6})$/
                    if (rgbRegex.test(this.color)) {
                        const match = this.color.match(rgbRegex);
                        const tohex = (n) => Number(n).toString(16)
                        const isRange = (match[1] <= 255 && match[1] >= 0) && (match[2] <= 255 && match[2] >= 0) && (match[3] <= 255 && match[3] >= 0);
                        if (!isRange) {
                            this.result = 'err';
                            return;
                        }
                        const hex = '#' + tohex(match[1]) + tohex(match[2]) + tohex(match[3])
                        this.result = `
                        The color type is RGB<br>
                        HEX value : ${hex}<br>
                        RGB value : ${match[0]}
                        `
                    } else if (hexRegex.test(this.color)) {
                        const match = this.color.match(hexRegex);
                        console.log(match);
                        if (match[1].length === 3) {
                            match[1] = match[1].split('').reduce((sum, x) => sum + x + x, '');
                        }
                        const torgb = (n) => parseInt(n, 16);
                        const rgb = `rgb(${torgb(match[1].slice(0, 2))},${torgb(match[1].slice(2, 4))},${torgb(match[1].slice(4, 6))})`

                        this.result = `
                        The color type is HEX<br>
                        HEX value : ${match[0]}<br>
                        RGB value : ${rgb}
                        `
                    } else {
                        this.result = 'err';
                    }

                }
            },
        }).mount('#app');
    </script>
</body>

</html>